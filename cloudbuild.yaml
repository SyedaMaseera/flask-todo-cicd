# steps:
#   - name: 'gcr.io/cloud-builders/gcloud'
#     entrypoint: 'bash'
#     args:
#       - '-c'
#       - |
#         gcloud run deploy flask-todo-app \
#           --source . \
#           --region us-central1 \
#           --platform managed \
#           --allow-unauthenticated

# options:
#   logging: CLOUD_LOGGING_ONLY
steps:
  - name: 'python'
    entrypoint: 'python'
    args: ['-m', 'unittest', 'discover', '-s', 'tests']

  - name: 'gcr.io/cloud-builders/gcloud'
    args: ['run', 'deploy', 'flask-todo-app',
           '--source=.',
           '--region=us-central1',
           '--platform=managed',
           '--allow-unauthenticated']

images: []
